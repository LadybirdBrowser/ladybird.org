---
type Sponsor = {
  name: string;
  href?: string;
  logo?: string;
};

type SponsorTier = {
  name: string;
  sponsors: Sponsor[];
};

const sponsors: SponsorTier[] = [
  {
    name: "Platinum",
    sponsors: [
      {
        name: "FUTO",
        href: "https://www.futo.org/",
        logo: "/assets/img/sponsors/futo.svg",
      },
      {
        name: "Shopify",
        href: "https://www.shopify.com/",
        logo: "/assets/img/sponsors/shopify.svg",
      },
      {
        name: "Cloudflare",
        href: "https://www.cloudflare.com/",
        logo: "/assets/img/sponsors/cloudflare.svg",
      },
    ],
  },
  {
    name: "Gold",
    sponsors: [
      {
        name: "Proton VPN",
        href: "https://protonvpn.com/",
        logo: "/assets/img/sponsors/protonvpn.svg",
      },
      { name: "Guillermo Rauch", href: "https://rauchg.com/" },
      {
        name: "ohne-makler.net",
        href: "https://www.ohne-makler.net/",
        logo: "/assets/img/sponsors/ohne-makler.svg",
      },
    ],
  },
  {
    name: "Silver",
    sponsors: [
      { name: "Mitchell Hashimoto", href: "https://mitchellh.com" },
      { name: "Paul Copplestone", href: "https://paul.copplest.one" },
      {
        name: "37signals",
        href: "https://37signals.com/",
        logo: "/assets/img/sponsors/37signals.svg",
      },
      {
        name: "Axeptio",
        href: "https://www.axept.io/",
        logo: "/assets/img/sponsors/axeptio.svg",
      },
      { name: "Andreas Mähler" },
    ],
  },
  {
    name: "Bronze",
    sponsors: [
      {
        name: "JetBrains",
        href: "https://www.jetbrains.com/",
        logo: "/assets/img/sponsors/jetbrains.svg",
      },
      { name: "Bastian Müller", href: "https://www.turbolent.com/" },
      {
        name: "Sourcegraph",
        href: "https://sourcegraph.com/",
        logo: "/assets/img/sponsors/sourcegraph.svg",
      },
      {
        name: "SerpApi",
        href: "https://serpapi.com",
        logo: "/assets/img/sponsors/serpapi.svg",
      },
      { name: "The Primeagen", href: "https://terminal.shop/" },
      {
        name: "Scraping Fish",
        href: "https://scrapingfish.com/",
        logo: "/assets/img/sponsors/scraping-fish.svg",
      },
      {
        name: "K15t",
        href: "https://www.k15t.com",
        logo: "/assets/img/sponsors/k15t.svg",
      },
      {
        name: "Unkey",
        href: "https://www.unkey.com",
        logo: "/assets/img/sponsors/unkey.svg",
      },
      {
        name: "Gravwell",
        href: "https://www.gravwell.io/",
        logo: "/assets/img/sponsors/gravwell.png",
      },
      { name: "Anonymous Chromium Developer" },
    ],
  },
  {
    name: "Copper",
    sponsors: [
      {
        name: "Optimising.com.au",
        href: "https://www.optimising.com.au/?utm_source=ladybird&utm_medium=website&utm_campaign=sponsor",
      },
      { name: "Guillaume Knispel" },
      { name: "Broadband Map", href: "https://broadbandmap.com" },
      { name: "Jonathan Lahijani", href: "https://jonathanlahijani.com" },
      { name: "Puter", href: "https://puter.com" },
      { name: "Follower24.de", href: "https://www.follower24.de" },
      { name: "Travis Heinström", href: "https://heinstrom.com" },
      { name: "Sjors Witteveen", href: "https://kabutops.com" },
      {
        name: "Philip Lonsing",
        href: "https://www.linkedin.com/in/philiplonsing/",
      },
      { name: "Clément Sibille", href: "https://lisible.xyz/" },
      { name: "b1ack0wl", href: "http://www.b1ack0wl.com/" },
      { name: "Gian Giovani", href: "https://wejick.wordpress.com" },
      { name: "Timely Learning", href: "https://www.timely-learning.com" },
      { name: "Coursiv", href: "https://coursiv.io" },
      { name: "Andrew Mead", href: "https://mead.io" },
      { name: "styfle", href: "https://styfle.dev" },
      { name: "Tyler Horvath", href: "http://www.tylerhorvath.space" },
      { name: "Hnefatafl Org", href: "https://hnefatafl.org" },
      { name: "Softwired Technologies", href: "https://softwiredtech.com" },
    ],
  },
  {
    name: "Infrastructure Sponsors",
    sponsors: [
      {
        name: "Blacksmith",
        href: "https://www.blacksmith.sh",
        logo: "/assets/img/sponsors/blacksmith.svg",
      },
      {
        name: "OakHost",
        href: "https://www.oakhost.net",
        logo: "/assets/img/sponsors/oakhost.svg",
      },
    ],
  },
];

const hasLogos = (tier: SponsorTier) => tier.sponsors.some((s) => s.logo);
---

<section id="sponsors" class="section">
  <div class="container">
    <h2 class="section-heading">Sponsors</h2>

    {
      sponsors.map((tier) => (
        <div class="tier">
          <h4 class="tier-name">{tier.name}</h4>
          {hasLogos(tier) ? (
            <div class="tier-logos">
              {tier.sponsors.map((s) => (
                <div class="logo-card">
                  {s.href ? (
                    <a href={s.href} rel="nofollow">
                      {s.logo ? (
                        <img src={s.logo} alt={s.name} />
                      ) : (
                        <span class="card-name">{s.name}</span>
                      )}
                    </a>
                  ) : s.logo ? (
                    <img src={s.logo} alt={s.name} />
                  ) : (
                    <span class="card-name">{s.name}</span>
                  )}
                </div>
              ))}
            </div>
          ) : (
            <p class="tier-text">
              {tier.sponsors.map((s, i) => (
                <>
                  {s.href ? (
                    <a href={s.href} rel="nofollow">
                      {s.name}
                    </a>
                  ) : (
                    s.name
                  )}
                  {i < tier.sponsors.length - 1 ? ", " : ""}
                </>
              ))}
            </p>
          )}
        </div>
      ))
    }
  </div>
</section>

<style>
  .tier {
    margin-bottom: 32px;
  }

  .tier:last-child {
    margin-bottom: 0;
  }

  .tier-name {
    margin-bottom: 12px;
    color: var(--text-muted);
    font-weight: var(--weight-medium);
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .tier-logos {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    align-items: center;
  }

  .logo-card {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px 20px;
    background: var(--bg-subtle);
    border: 1px solid var(--border);
    border-radius: 6px;
    min-height: 56px;
  }

  .logo-card a {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: var(--text-primary);
  }

  .logo-card img {
    max-height: 28px;
    max-width: 120px;
    object-fit: contain;
  }

  .card-name {
    font-size: 14px;
    font-weight: var(--weight-medium);
    color: var(--text-primary);
    white-space: nowrap;
  }

  .tier-text {
    font-size: 14px;
    line-height: 1.8;
  }

  @media (max-width: 640px) {
    .tier-logos {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .logo-card {
      padding: 10px 12px;
      min-height: 44px;
      min-width: 0;
    }

    .logo-card img {
      max-height: 22px;
      max-width: 100px;
    }

    .card-name {
      font-size: 12px;
      white-space: normal;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tier-text {
      font-size: 13px;
    }
  }
</style>
