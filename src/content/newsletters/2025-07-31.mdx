---
title: This Month in Ladybird - July 2025
description: ?
date: 2025-07-31
draft: true
---

Hello friends! July is done!

### Web Platform Tests (WPT)

_insert WPT stats here_

### `:state(foo)` and `:unchecked` pseudo-classes

We gained a couple of new pseudo-classes this month:

- `:state(foo)` matches a custom element that has `foo` in its states set. This lets custom elements be styled
  differently depending on their state, just like a regular element can be `:empty` or `:checked`, for example.
- Speaking of which, we also added `:unchecked`. This matches elements that can be checked, but currently are not.

### Logical property groups

Continuing work that was started [https://ladybird.org/newsletter/2025-06-30/#css-logical-aliases](last month),
we now generate the code that maps logical properties to physical ones, decreasing the amount of boilerplate to add
a new logical property. Logical and physical properties form "groups", for example all the `margin` properties, and
we now account for these when serializing them, and when modifying them through JavaScript.

### Arbitrary substitution functions

This mouthful of a name refers to CSS functions like `var()` which get substituted with an arbitrary chunk of CSS.
Recent versions of the CSS specs formally define how these work, and this month we rewrote our implementations of
`var()` and `attr()` to match this new definition. Besides being easier to maintain, this prepares us to more easily
add other arbitrary substitution functions in the future, such as `if()` and `env()`.

### `<syntax>` parsing

Some modern CSS features allow authors to specify their own CSS syntax which is then used to parse something else.
We've implemented the `<syntax>` type which corresponds to this, and it can now be used in `attr()`, to specify how
to interpret the attribute. For example, `attr(data-color type(<color>))` would parse the `data-color` attribute as
if it was a CSS color value.

### `@property` progress

We've had a stub implementation of `@property` for a while, and this month we started making some progress on it.
We now make use of a registered custom property's initial value, and we also gained initial support for `CSS.registerProperty()`.

### HTTP/3 support

Support for [HTTP/3](https://en.wikipedia.org/wiki/HTTP/3) with OpenSSL and [ngtcp2](https://github.com/ngtcp2/ngtcp2) was [recently added with curl 8.14.0.](https://curl.se/ch/8.14.0.html)

Since we depend on the OpenSSL backend for libcurl, this has allowed us to enable HTTP/3 support, which allows us to
use it for servers that advertise support for it in the [Alt-Svc header.](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Alt-Svc)

![](/assets/img/newsletter-july-2025-http-3.png)

We found an issue relating to how libcurl parses `Alt-Svc: clear`, which was [fixed in curl 8.15.0.](https://curl.se/ch/8.15.0.html)

### High refresh rate support

We now take into account the refresh rate of the current screen to determine how often we should update the rendering of web content.
Previously, it was hardcoded to update at 60 frames per second.

For example, applications using [requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame)
will now render up to 120 times per second on a 120Hz screen. This also affects scrolling, animations, transitions and more.

![](/assets/img/newsletter-july-2025-high-refresh-rate.png)

### Google reCAPTCHA passing

There was a long standing issue with our [postMessage](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage) implementation
where if the serialized type was not used in the destination realm before, we would fail to reconstruct it because it did not think it was
available in that realm.

This was fixed this month, allowing Google reCAPTCHA to work and pass!

<video controls style="margin-bottom: 2em">
  <source src="/assets/img/newsletter-july-2025-google-recaptcha.mp4"></source>
</video>

Unfortunately, it does not work on origins that are not https://www.google.com/ due to a separate same-origin policy issue that has not been
resolved.

### The Web is UTF-16

Strings in JavaScript and the Web are [UTF-16 by definition](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#utf-16_characters_unicode_code_points_and_grapheme_clusters).
Until now, we have been using a UTF-8 string type internally to represent JS strings, and we would transcode to UTF-16
on-the-fly to satisfy specification requirements as needed. Over time, this has resulted in an ever-growing number of
locations that need to perform extra work to behave correctly. This month, we've decided to introduce a UTF-16 string
to begin using wholesale within LibJS and LibWeb. This not only make the code simpler to write and reason about, but
has also fixed some Unicode-related edge cases that we previously missed.

### Credits

We'd like to thank everyone who contributed code this month:

_names_
